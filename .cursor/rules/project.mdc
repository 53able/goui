---
description: UI Sample Admin ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
globs: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx"]
alwaysApply: true
---

# UI Sample Admin - Project Rules

> pnpm workspaces + Turborepo ã«ã‚ˆã‚‹ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã®ç®¡ç†ç”»é¢ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆ

---

## ğŸ¯ Project Identity

| é …ç›® | å†…å®¹ |
|------|------|
| **æ§‹æˆ** | pnpm workspaces + Turborepo ãƒ¢ãƒãƒ¬ãƒ |
| **ç›®çš„** | ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºç´šç®¡ç†ç”»é¢ã®é«˜é€Ÿæ§‹ç¯‰ |
| **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** | React 19 + Hono SSR + Vite HMR |
| **UI** | [Shadcn Admin Kit](https://marmelab.com/shadcn-admin-kit/) + react-admin |

> ğŸ“ ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ `@myorg/*` ã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã€‚å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ—ï¸ SSR Architecture

| ç’°å¢ƒ | ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹å¼ | ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ« |
|------|-----------------|-------------|
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º | **SSR + HMR** | `server/dev.ts` |
| æœ¬ç•ªï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰ | SSR | `server/production.ts` |
| **Vercel** | **CSR + Serverless** | `dist/` + `api/*.ts` |

> ğŸ“ è©³ç´°ã¯ `.cursor/rules/SSR-Implementation-Guide.mdc` ã‚’å‚ç…§

---

## ğŸ“¦ Monorepo Structure

```
project-root/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # @myorg/web - ãƒ¡ã‚¤ãƒ³Webã‚¢ãƒ—ãƒª
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ [[...route]].ts # Vercel Serverless Functions ã‚¨ãƒ³ãƒˆãƒªãƒ¼
â”‚   â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”‚   â”œâ”€â”€ dev.ts          # é–‹ç™ºç”¨SSRã‚µãƒ¼ãƒãƒ¼ï¼ˆViteçµ±åˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ production.ts   # æœ¬ç•ªç”¨ã‚µãƒ¼ãƒãƒ¼ï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ appVercel.ts    # Vercelç”¨Honoã‚¢ãƒ—ãƒªï¼ˆè»½é‡ç‰ˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ app.ts          # APIãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ routes/         # APIãƒ«ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ main.tsx        # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼ˆãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ entry-server.tsx # æœ¬ç•ªSSRç”¨ã‚¨ãƒ³ãƒˆãƒªãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ App.tsx         # ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ index.html          # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆSSRãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å«ã‚€ï¼‰
â”‚   â”‚   â”œâ”€â”€ middleware.ts       # Vercel Edge Middlewareï¼ˆèªè¨¼ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ vite.config.ts      # SSRè¨­å®šã‚’å«ã‚€Viteè¨­å®š
â”‚   â”‚   â”œâ”€â”€ vercel.json
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ admin/                  # @myorg/admin - ç®¡ç†ç”»é¢ï¼ˆä¾‹ï¼‰
â”‚       â”œâ”€â”€ api/
â”‚       â”œâ”€â”€ server/
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ middleware.ts
â”‚       â”œâ”€â”€ vite.config.ts
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                 # @myorg/shared - å…±æœ‰ã‚¹ã‚­ãƒ¼ãƒãƒ»å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ schemas.ts      # Zodã‚¹ã‚­ãƒ¼ãƒï¼ˆå‹ã®å˜ä¸€ã‚½ãƒ¼ã‚¹ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                     # @myorg/ui - å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ AlertDialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Checkbox.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Toaster.tsx     # sonner ãƒ™ãƒ¼ã‚¹ã®ãƒˆãƒ¼ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts        # cn() é–¢æ•°
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ai/                     # @myorg/ai - AI SDK å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts        # AI SDK ã‚³ã‚¢æ©Ÿèƒ½ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚       â”‚   â”œâ”€â”€ react.ts        # Reactç”¨æƒ…å ±
â”‚       â”‚   â””â”€â”€ agents/         # å…±æœ‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©
â”‚       â”‚       â””â”€â”€ chatAgent.ts
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ pnpm-workspace.yaml         # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å®šç¾©
â”œâ”€â”€ turbo.json                  # Turborepo ã‚¿ã‚¹ã‚¯å®šç¾©
â”œâ”€â”€ package.json                # ãƒ«ãƒ¼ãƒˆï¼ˆå…±é€šdevDeps + turboã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼‰
â”œâ”€â”€ biome.json                  # å…±é€šLint/Formatè¨­å®š
â””â”€â”€ tsconfig.json               # ãƒ«ãƒ¼ãƒˆTSè¨­å®šï¼ˆreferencesï¼‰
```

---

## ğŸ› ï¸ Tech Stack

### Monorepo Tools

| ãƒ„ãƒ¼ãƒ« | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|--------|-----------|------|
| **pnpm** | ^9.1.1 | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆworkspacesï¼‰ |
| **Turborepo** | ^2.5.4 | ãƒ¢ãƒãƒ¬ãƒãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |

### Frontend (apps/*)

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **Core** | React | ^19.2.3 | UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **Core** | TypeScript | ~5.9.3 | å‹å®‰å…¨æ€§ï¼ˆstrict modeï¼‰ |
| **Core** | Vite | ^7.3.0 | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |
| **UI** | Tailwind CSS | ^4.1.18 | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ï¼ˆCSS-first configï¼‰ |
| **UI** | lucide-react | ^0.561.0 | ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| **UI** | next-themes | ^0.4.6 | ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ |
| **UI** | tailwindcss-animate | ^1.0.7 | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **Data** | @tanstack/react-query | ^5.90.12 | ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| **Data** | @tanstack/react-table | ^8.21.3 | ãƒ†ãƒ¼ãƒ–ãƒ«ç®¡ç† |
| **State** | Zustand | ^5.0.9 | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç† |
| **Form** | React Hook Form | ^7.68.0 | ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç† |
| **Schema** | Zod | ^4.2.1 | ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **Admin** | react-admin | ^5.13.4 | ç®¡ç†ç”»é¢ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **Admin** | Shadcn Admin Kit | latest | react-adminç”¨shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| **Quality** | Biome | ^2.3.9 | Lint + Format |
| **Test** | Vitest | ^4.0.16 | ãƒ†ã‚¹ãƒˆ |

> ğŸ“ **Shadcn Admin Kit**: [marmelab/shadcn-admin-kit](https://marmelab.com/shadcn-admin-kit/) - react-adminå‘ã‘ã®shadcn/uiãƒ™ãƒ¼ã‚¹UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚­ãƒƒãƒˆ

### Backend (apps/web/server/)

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **Core** | Hono | ^4.11.1 | è»½é‡ãƒ»é«˜é€ŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **Server** | @hono/node-server | ^1.19.7 | Node.jsã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ |
| **Schema** | @hono/zod-openapi | ^1.1.5 | Zodã‚¹ã‚­ãƒ¼ãƒ + OpenAPIçµ±åˆ |
| **Docs** | @scalar/hono-api-reference | ^0.9.28 | APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ UI |
| **RPC** | hono/client | - | å‹å®‰å…¨ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé€šä¿¡ |
| **Runtime** | Node.js | >=20.0.0 | å®Ÿè¡Œç’°å¢ƒï¼ˆtsxä½¿ç”¨ï¼‰ |

### AI (packages/ai)

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|---------|------|-----------|------|
| **Core** | ai | beta | Vercel AI SDK 6 ã‚³ã‚¢ |
| **Provider** | @ai-sdk/openai | beta | OpenAI ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ |
| **React** | @ai-sdk/react | beta | React ãƒ•ãƒƒã‚¯ï¼ˆuseChatç­‰ï¼‰ |

> ğŸ“ AI SDK ç’°å¢ƒå¤‰æ•°ã®è©³ç´°ã¯ `.cursor/rules/ai-environment.mdc` ã‚’å‚ç…§

---

## ğŸ”§ Import Rulesï¼ˆãƒ¢ãƒãƒ¬ãƒï¼‰

```typescript
// âœ… å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Button, Input, cn, toast } from '@myorg/ui';
import { UserSchema, type User } from '@myorg/shared';
import { openai, generateText, chatAgent } from '@myorg/ai';

// âœ… Reactç”¨AIãƒ•ãƒƒã‚¯ï¼ˆå„ã‚¢ãƒ—ãƒªã§ @ai-sdk/react ã‚’ç›´æ¥ä½¿ç”¨ï¼‰
import { useChat } from '@ai-sdk/react';

// âœ… ã‚¢ãƒ—ãƒªå†…ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆ@/ï¼‰
import { useTodoStore } from '@/stores';
import { Tetris } from '@/components/admin/Tetris';

// âŒ ç›¸å¯¾ãƒ‘ã‚¹ã§ã®å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‚ç…§ã¯ç¦æ­¢
import { Button } from '../../packages/ui/src/Button';
```

### workspace:* ä¾å­˜é–¢ä¿‚

```json
// apps/*/package.json
{
  "dependencies": {
    "@myorg/ai": "workspace:*",
    "@myorg/shared": "workspace:*",
    "@myorg/ui": "workspace:*",
    "@ai-sdk/react": "beta"
  }
}
```

---

## ğŸš« FORBIDDEN - çµ¶å¯¾ç¦æ­¢

### anyå‹ã®ä½¿ç”¨ç¦æ­¢

```typescript
// âŒ BAD
const data: any = fetchData();

// âœ… GOOD
const data = UserSchema.parse(await fetchData());
```

### ç›´æ¥çš„ãªå‹å®šç¾©ï¼ˆZodã‚¹ã‚­ãƒ¼ãƒãªã—ï¼‰ç¦æ­¢

```typescript
// âŒ BAD
interface User {
  id: string;
  name: string;
}

// âœ… GOOD - packages/shared ã§å®šç¾©
const UserSchema = z.object({
  id: z.string(),
  name: z.string(),
});
type User = z.infer<typeof UserSchema>;
```

### letå®£è¨€ç¦æ­¢ï¼ˆå‚ç…§é€éæ€§é•åï¼‰

```typescript
// âŒ BAD
let count = 0;
count++;

// âœ… GOOD
const newCount = count + 1;
const newItems = [...items, newItem];
```

### UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é‡è¤‡å®šç¾©ç¦æ­¢

```typescript
// âŒ BAD - appså†…ã§UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†å®šç¾©
// apps/web/src/components/ui/Button.tsx

// âœ… GOOD - packages/uiã‹ã‚‰ä½¿ç”¨
import { Button } from '@myorg/ui';
```

---

## âœ… REQUIRED - å¿…é ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### Pattern 1: Zodã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆï¼ˆpackages/sharedï¼‰

```typescript
// packages/shared/src/schemas.ts
import { z } from 'zod';

export const UserSchema = z.object({
  id: z.string().uuid(),
  name: z.string().min(1).max(100),
  email: z.string().email(),
  status: z.enum(['active', 'inactive', 'pending']),
  createdAt: z.coerce.date(),
});

export type User = z.infer<typeof UserSchema>;

// ä½œæˆç”¨ã‚¹ã‚­ãƒ¼ãƒ
export const CreateUserSchema = UserSchema.omit({ 
  id: true, 
  createdAt: true 
});
export type CreateUser = z.infer<typeof CreateUserSchema>;
```

### Pattern 2: å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆpackages/uiï¼‰

> ğŸ“¦ **ä¸»è¦ä¾å­˜é–¢ä¿‚**: `class-variance-authority` (CVA), `clsx` + `tailwind-merge`, `sonner`, `lucide-react`, `@radix-ui/*`
>
> ğŸ’¡ **Shadcn Admin Kit ã¨ã®é–¢ä¿‚**: `packages/ui` ã¯åŸºæœ¬çš„ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆButton, Inputç­‰ï¼‰ã‚’æä¾›ã€‚ç®¡ç†ç”»é¢å›ºæœ‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆDataGrid, Edit, Showç­‰ï¼‰ã¯ [Shadcn Admin Kit](https://marmelab.com/shadcn-admin-kit/) ã‚’ä½¿ç”¨ã€‚

```typescript
// packages/ui/src/Button.tsx
import { cn } from './utils.js';
import { cva, type VariantProps } from 'class-variance-authority';

const buttonVariants = cva('...base styles...', {
  variants: { variant: { default: '...', destructive: '...' } },
});

export const Button: FC<ButtonProps & VariantProps<typeof buttonVariants>> = (
  { className, variant, ...props }
) => <button className={cn(buttonVariants({ variant }), className)} {...props} />;

// packages/ui/src/index.ts
export { AlertDialog, AlertDialogAction, ... } from './AlertDialog.js';
export { Button, buttonVariants } from './Button.js';
export { Checkbox } from './Checkbox.js';
export { Input } from './Input.js';
export { Toaster, toast } from './Toaster.js';
export { cn } from './utils.js';
```

### Pattern 3: ã‚¢ãƒ—ãƒªã‹ã‚‰ã®å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ©ç”¨

```typescript
// apps/web/src/components/admin/TodoList.tsx
import { Button, Input, AlertDialog, cn, toast } from '@myorg/ui';
import type { User } from '@myorg/shared';
```

---

## ğŸ“ Naming Conventions

| ç¨®é¡ | è¦å‰‡ | ä¾‹ |
|------|------|-----|
| **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å** | `@myorg/*` | `@myorg/web`, `@myorg/ui` |
| **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** | `PascalCase.tsx` | `UserList.tsx` |
| **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£** | `camelCase.ts` | `formatDate.ts` |
| **ã‚¹ãƒˆã‚¢** | `camelCaseStore.ts` | `userStore.ts` |
| **ã‚¹ã‚­ãƒ¼ãƒ** | `schemas.ts` | `packages/shared/src/schemas.ts` |
| **ãƒ†ã‚¹ãƒˆ** | `*.test.ts` / `*.test.tsx` | `UserList.test.tsx` |
| **ãƒ•ã‚¡ã‚¤ãƒ«å** | æœ€å¤§4å˜èªé€£çµ | `userListTable.tsx` |
| **Gitãƒ–ãƒ©ãƒ³ãƒ** | æœ€å¤§4å˜èªé€£çµ | `feature/user-list-table` |

---

## âœ… Quality Gates

ã‚³ãƒŸãƒƒãƒˆå‰ã«å¿…ãšå®Ÿè¡Œï¼ˆTurborepoã§ä¸¦åˆ—å®Ÿè¡Œï¼‰ï¼š

```bash
pnpm typecheck && pnpm lint && pnpm test && pnpm build
```

**å…¨ã¦ãƒ‘ã‚¹ã—ãªã„é™ã‚Šã‚³ãƒŸãƒƒãƒˆç¦æ­¢** ğŸš«

---

## ğŸš¦ Endpoints

### é–‹ç™ºç’°å¢ƒï¼ˆSSR + HMRï¼‰

> ğŸ’¡ é–‹ç™ºæ™‚ã¯ `pnpm dev:api` ã§SSRã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã€‚SSRã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã§SSR + HMRãŒæœ‰åŠ¹ã«ãªã‚‹ã€‚

| URL | ç¨®åˆ¥ | èª¬æ˜ |
|-----|------|------|
| `http://localhost:3000` | SSRã‚µãƒ¼ãƒãƒ¼ (web) | **ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ã‚¹URL** - SSR + API |
| `http://localhost:3001` | SSRã‚µãƒ¼ãƒãƒ¼ (admin) | **ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ã‚¹URL** - SSR + API |
| `http://localhost:3002` | SSRã‚µãƒ¼ãƒãƒ¼ (playground) | **ãƒ¡ã‚¤ãƒ³ã‚¢ã‚¯ã‚»ã‚¹URL** - SSR + API |
| `http://localhost:5173` | Vite Dev (web) | HMRç”¨ï¼ˆç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯CSRï¼‰ |
| `http://localhost:5174` | Vite Dev (admin) | HMRç”¨ï¼ˆç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯CSRï¼‰ |
| `http://localhost:5175` | Vite Dev (playground) | HMRç”¨ï¼ˆç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯CSRï¼‰ |
| `http://localhost:300x/api/ui` | Swagger UI | OpenAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
| `http://localhost:300x/api/doc` | OpenAPI JSON | APIä»•æ§˜æ›¸ |

### Vercelç’°å¢ƒï¼ˆCSR + Serverlessï¼‰

| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | Root Directory | URL |
|-------------|----------------|-----|
| myorg-web | `apps/web` | `https://myorg-web.vercel.app` |
| myorg-admin | `apps/admin` | `https://myorg-admin.vercel.app` |
| myorg-playground | `apps/playground` | `https://myorg-playground.vercel.app` |

> âš ï¸ **Vercelã§ã¯SSRã‚’ä½¿ç”¨ã—ãªã„ç†ç”±**:
> 1. **Edge Runtimeåˆ¶ç´„**: `react-dom/server` ãªã©Node.jsä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‹•ã‹ãªã„
> 2. **ã‚³ã‚¹ãƒˆåŠ¹ç‡**: é™çš„HTML + Serverless ã®æ–¹ãŒã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«
> 3. **ã‚·ãƒ³ãƒ—ãƒ«ã•**: Honoå…¬å¼æ¨å¥¨ã®ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ‡ãƒ—ãƒ­ã‚¤
>
> ãã®ãŸã‚ï¼š
> - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: `dist/` ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSRï¼‰
> - API: `api/[[...route]].ts` â†’ `server/appVercel.ts`ï¼ˆè»½é‡ç‰ˆï¼‰
> - èªè¨¼: `middleware.ts`ï¼ˆEdge Middlewareï¼‰

---

## ğŸ”§ Configuration Files

| ãƒ•ã‚¡ã‚¤ãƒ« | å ´æ‰€ | ç”¨é€” |
|---------|------|------|
| `pnpm-workspace.yaml` | ãƒ«ãƒ¼ãƒˆ | ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å®šç¾© |
| `turbo.json` | ãƒ«ãƒ¼ãƒˆ | Turborepoã‚¿ã‚¹ã‚¯å®šç¾© |
| `package.json` | ãƒ«ãƒ¼ãƒˆ | å…±é€šdevDeps + turboã‚¹ã‚¯ãƒªãƒ—ãƒˆ |
| `biome.json` | ãƒ«ãƒ¼ãƒˆ | å…±é€šLint/Formatè¨­å®š |
| `tsconfig.json` | ãƒ«ãƒ¼ãƒˆ | TSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆreferences |
| `vite.config.ts` | å„apps/* | Viteãƒ“ãƒ«ãƒ‰è¨­å®š |
| `vercel.json` | å„apps/* | Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š |

---

## ğŸ†• æ–°ã—ã„ã‚¢ãƒ—ãƒªã®è¿½åŠ æ–¹æ³•

> ğŸ“ è©³ç´°ãªæ‰‹é †ã¯ `.cursor/commands/add-app.md` ã‚’å‚ç…§

### å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | ç”¨é€” |
|---------|------|
| `package.json` | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®šç¾© |
| `tsconfig.json` | TypeScriptè¨­å®šï¼ˆãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ `@/*` å«ã‚€ï¼‰ |
| `vite.config.ts` | Viteãƒ“ãƒ«ãƒ‰è¨­å®šï¼ˆ**SSRè¨­å®šå«ã‚€**ï¼‰ |
| `index.html` | HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆ**SSRãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å«ã‚€**ï¼‰ |
| `src/index.css` | Tailwind CSS v4 è¨­å®š |
| `src/main.tsx` | Reactã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆ**ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ**ï¼‰ |
| `src/entry-server.tsx` | **æœ¬ç•ªSSRç”¨ã‚¨ãƒ³ãƒˆãƒªãƒ¼** |
| `src/App.tsx` | ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ**initialData props**ï¼‰ |
| `server/dev.ts` | **SSR + HMR é–‹ç™ºã‚µãƒ¼ãƒãƒ¼** |
| `server/production.ts` | **æœ¬ç•ªç”¨SSRã‚µãƒ¼ãƒãƒ¼ï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰** |
| `server/app.ts` | APIãƒ«ãƒ¼ãƒˆå®šç¾© |
| `server/appVercel.ts` | **Vercelç”¨Honoã‚¢ãƒ—ãƒªï¼ˆè»½é‡ç‰ˆï¼‰** |
| `api/[[...route]].ts` | Vercel Serverless Functions |
| `middleware.ts` | Vercel Edge Middleware |
| `vercel.json` | Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š |

### ãƒãƒ¼ãƒˆç•ªå·ã®å‰²ã‚Šå½“ã¦

| ã‚¢ãƒ—ãƒª | SSRã‚µãƒ¼ãƒãƒ¼ | Vite Dev |
|--------|------------|----------|
| @myorg/web | 3000 | 5173 |
| @myorg/admin | 3001 | 5174 |
| @myorg/playground | 3002 | 5175 |
| æ–°ã‚¢ãƒ—ãƒª | 3003ã€œ | 5176ã€œ |

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# 1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p apps/æ–°ã‚¢ãƒ—ãƒª/{src,server/routes,api}

# 2. å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆadd-app.mdå‚ç…§ï¼‰

# 3. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# 4. SSRé–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm --filter @myorg/æ–°ã‚¢ãƒ—ãƒª dev:api
```

### å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `http://localhost:300x`ï¼ˆSSRã‚µãƒ¼ãƒãƒ¼ï¼‰ã§ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚½ãƒ¼ã‚¹å¤‰æ›´æ™‚ã«HMRãŒå‹•ä½œã™ã‚‹
- [ ] `@myorg/ui` ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‹•ä½œã™ã‚‹
- [ ] `pnpm typecheck` ãŒé€šã‚‹
- [ ] `pnpm lint` ãŒé€šã‚‹

---

## ğŸ” Environment Variables

### å¿…é ˆç’°å¢ƒå¤‰æ•°

| é …ç›® | ç’°å¢ƒå¤‰æ•° | èª¬æ˜ |
|------|---------|------|
| **OpenAI APIã‚­ãƒ¼** | `OPENAI_API_KEY` | AIæ©Ÿèƒ½ã«å¿…é ˆ |
| **Basicèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼** | `BASIC_AUTH_USERNAME` | APIèªè¨¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: adminï¼‰ |
| **Basicèªè¨¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰** | `BASIC_AUTH_PASSWORD` | APIèªè¨¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: adminï¼‰ |

> âš ï¸ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯é–‹ç™ºç”¨ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯ `.env` ã§å¿…ãšå¤‰æ›´ã—ã¦ãã ã•ã„ã€‚
> ğŸ“ AI API ã‚­ãƒ¼ã®è©³ç´°ã¯ `.cursor/rules/ai-environment.mdc` ã‚’å‚ç…§

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼ˆ.envï¼‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=admin
```

### Vercelç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# å¯¾è©±å¼ã§è¨­å®š
vercel env add OPENAI_API_KEY production
vercel env add BASIC_AUTH_USERNAME production

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¸€æ‹¬è¨­å®š
while IFS='=' read -r key value; do
  [[ -z "$key" || "$key" =~ ^# ]] && continue
  echo "$value" | vercel env add "$key" production --yes
done < .env.production

# Vercelã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã¸å–å¾—
vercel env pull .env.local
```

> ğŸ“ è©³ç´°ã¯ `.cursor/commands/setup.md` ã®ã€Œç’°å¢ƒå¤‰æ•°ã®ä¸€æ‹¬è¨­å®šã€ã‚’å‚ç…§
