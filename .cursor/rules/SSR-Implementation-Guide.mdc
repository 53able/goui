# Hono + Vite SSR å®Ÿè£…ã‚¬ã‚¤ãƒ‰

> React 19 + Hono + Vite ã«ã‚ˆã‚‹æœ¬æ ¼çš„ãªSSRï¼ˆServer-Side Renderingï¼‰å®Ÿè£…ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰

---

## âš ï¸ ã“ã®ã‚¬ã‚¤ãƒ‰ã®ã‚¹ã‚³ãƒ¼ãƒ—

| ç’°å¢ƒ | ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ–¹å¼ | ä½¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ« |
|------|-----------------|-------------|
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º | SSR + HMR | `server/dev.ts` |
| æœ¬ç•ªï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰ | SSR | `server/production.ts` + `src/entry-server.tsx` |
| **Vercel** | **CSR + Serverless** | `dist/` + `api/*.ts` |

> ğŸ’¡ **é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰ã§ã¯SSRãŒæœ‰åŠ¹**ã€**Vercelã§ã¯CSR + Serverless** ã¨ã„ã†æ§‹æˆã§ã™ã€‚
> Vercelãƒ‡ãƒ—ãƒ­ã‚¤ã®è©³ç´°ã¯æœ«å°¾ã®ã€ŒVercelãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã®é–¢ä¿‚ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã€‚

---

## ğŸ¯ ã“ã®ã‚¬ã‚¤ãƒ‰ã®ç›®çš„

ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã®Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã€ä»¥ä¸‹ã‚’å®Ÿç¾ã™ã‚‹SSRã‚’å®Ÿè£…ã™ã‚‹ï¼š

- **SSRï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰**: åˆå›ãƒ­ãƒ¼ãƒ‰é«˜é€ŸåŒ–ã€SEOå¯¾å¿œ
- **HMRï¼ˆãƒ›ãƒƒãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰**: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’å³åº§ã«åæ˜ 
- **Fast Refresh**: ReactçŠ¶æ…‹ã‚’ä¿æŒã—ãŸã¾ã¾æ›´æ–°
- **ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ãƒ–ãƒ©ã‚¦ã‚¶ (Client)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GET /        â”‚   â”‚ GET /src/*.tsxâ”‚   â”‚ WebSocket HMR â”‚
â”‚  (HTMLè¦æ±‚)    â”‚   â”‚ (JSè¦æ±‚)      â”‚   â”‚ (å¤‰æ›´é€šçŸ¥)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â–¼                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Hono SSR ã‚µãƒ¼ãƒãƒ¼ (:3002)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  vite.ssrLoadModule() ã§Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆèª­è¾¼   â”‚  â”‚
â”‚  â”‚  renderToString() ã§HTMLç”Ÿæˆ                    â”‚  â”‚
â”‚  â”‚  Viteã‚¢ã‚»ãƒƒãƒˆã¸ã®ãƒ—ãƒ­ã‚­ã‚·                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vite Dev ã‚µãƒ¼ãƒãƒ¼ (:5175)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  TypeScript/JSXå¤‰æ›                             â”‚  â”‚
â”‚  â”‚  HMR WebSocketç®¡ç†                              â”‚  â”‚
â”‚  â”‚  React Fast Refresh                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ•ãƒ­ãƒ¼è©³ç´°

1. **åˆå›ã‚¢ã‚¯ã‚»ã‚¹** (`GET /`)
   - Hono SSRã‚µãƒ¼ãƒãƒ¼ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡
   - `vite.ssrLoadModule`ã§Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰
   - `renderToString`ã§HTMLã‚’ç”Ÿæˆ
   - åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’`window.__INITIAL_DATA__`ã«æ³¨å…¥
   - å®Œå…¨ãªHTMLã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”å´

2. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´**
   - SSRã•ã‚ŒãŸHTMLã‚’å³åº§ã«è¡¨ç¤º
   - `main.tsx`ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œ`hydrateRoot`ã‚’å®Ÿè¡Œ
   - ReactãŒãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æ¥ç¶š
   - å®Œå…¨ã«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¢ãƒ—ãƒªã«

3. **HMRï¼ˆé–‹ç™ºæ™‚ï¼‰**
   - Vite dev serverãŒãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’æ¤œçŸ¥
   - WebSocketçµŒç”±ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€šçŸ¥
   - React Fast Refreshã§çŠ¶æ…‹ã‚’ä¿æŒã—ãŸã¾ã¾æ›´æ–°

---

## ğŸ“ å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
apps/{app-name}/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ [[...route]].ts # Vercel Serverless Functions ã‚¨ãƒ³ãƒˆãƒªãƒ¼
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ dev.ts          # é–‹ç™ºç”¨SSRã‚µãƒ¼ãƒãƒ¼ï¼ˆViteçµ±åˆï¼‰
â”‚   â”œâ”€â”€ production.ts   # æœ¬ç•ªç”¨SSRã‚µãƒ¼ãƒãƒ¼ï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰
â”‚   â”œâ”€â”€ appVercel.ts    # Vercelç”¨Honoã‚¢ãƒ—ãƒªï¼ˆè»½é‡ç‰ˆï¼‰
â”‚   â””â”€â”€ app.ts          # APIãƒ«ãƒ¼ãƒˆå®šç¾©
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx        # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼ˆãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â”œâ”€â”€ entry-server.tsx # æœ¬ç•ªSSRç”¨ã‚¨ãƒ³ãƒˆãƒªãƒ¼
â”‚   â”œâ”€â”€ App.tsx         # ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ middleware.ts       # Vercel Edge Middlewareï¼ˆèªè¨¼ç­‰ï¼‰
â”œâ”€â”€ vite.config.ts      # SSRè¨­å®šã‚’å«ã‚€Viteè¨­å®š
â”œâ”€â”€ vercel.json         # Vercelãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---

## ğŸ”§ å®Ÿè£…æ‰‹é †

### Step 1: vite.config.ts ã«SSRè¨­å®šã‚’è¿½åŠ 

```typescript
import { resolve } from 'node:path';
import tailwindcss from '@tailwindcss/vite';
import react from '@vitejs/plugin-react';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    react({
      jsxRuntime: 'automatic',
      include: /\.(tsx?|jsx?)$/,
      exclude: /node_modules/,
    }),
    tailwindcss(),
  ],
  resolve: {
    alias: {
      '@': resolve(import.meta.dirname, './src'),
    },
  },
  server: {
    port: 5175, // ã‚¢ãƒ—ãƒªã”ã¨ã«å¤‰æ›´
    proxy: {
      '/api': {
        target: 'http://localhost:3002', // APIã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆ
        changeOrigin: true,
      },
    },
  },
  // â¬‡ï¸ SSRè¨­å®šï¼ˆé‡è¦ï¼ï¼‰
  ssr: {
    // react ã¨ react-dom ã¯Node.jsãƒã‚¤ãƒ†ã‚£ãƒ–ã§å‡¦ç†ï¼ˆCommonJSäº’æ›ï¼‰
    external: ['react', 'react-dom'],
  },
  build: {
    manifest: true,
    ssrManifest: true,
    outDir: 'dist',
  },
});
```

### Step 2: index.html ã«SSRãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¿½åŠ 

> ğŸ’¡ **Single Source of Truth**: index.html ã‚’å”¯ä¸€ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ç”¨ã—ã€SSRã¨CSRã§2é‡ç®¡ç†ã‚’é¿ã‘ã‚‹

```html
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><!--ssr-title-->App Title<!--/ssr-title--></title>
    <meta name="description" content="<!--ssr-description-->App Description<!--/ssr-description-->" />
    <!--ssr-head-->
  </head>
  <body>
    <div id="root"><!--ssr-outlet--></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

**ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®èª¬æ˜:**

| ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ | ç”¨é€” | CSRæ™‚ | SSRæ™‚ |
|-----------------|------|-------|-------|
| `<!--ssr-title-->...<!--/ssr-title-->` | ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¡¨ç¤º | å‹•çš„ã«ç½®æ› |
| `<!--ssr-description-->...<!--/ssr-description-->` | meta description | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¡¨ç¤º | å‹•çš„ã«ç½®æ› |
| `<!--ssr-head-->` | è¿½åŠ ã®headã‚¿ã‚° | ä½•ã‚‚å‡ºåŠ›ã—ãªã„ | `__INITIAL_DATA__`ç­‰ã‚’æ³¨å…¥ |
| `<!--ssr-outlet-->` | Reactã‚¢ãƒ—ãƒªã®å‡ºåŠ›å…ˆ | ç©ºï¼ˆCSRã§æç”»ï¼‰ | SSR HTMLã‚’æ³¨å…¥ |

### Step 3: server/dev.ts ã‚’å®Ÿè£…

```typescript
import { readFile } from 'node:fs/promises';
import { serve } from '@hono/node-server';
import { OpenAPIHono } from '@hono/zod-openapi';
import { basicAuth } from 'hono/basic-auth';
import { createElement, StrictMode } from 'react';
import { renderToString } from 'react-dom/server';
import { createServer as createViteServer, type ViteDevServer } from 'vite';
import { apiRoutes } from './app.js';

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªViteã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
let vite: ViteDevServer;

/**
 * Viteã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
 */
const createVite = async () => {
  vite = await createViteServer({
    server: {
      middlewareMode: false,
      port: 5175, // ã‚¢ãƒ—ãƒªã”ã¨ã«å¤‰æ›´
      hmr: { port: 5175 },
    },
    appType: 'custom',
  });
  await vite.listen();
  return vite;
};

/**
 * é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
 */
const startDevServer = async () => {
  const port = Number(process.env.API_PORT) || 3002;

  // Vite dev serverã‚’èµ·å‹•
  await createVite();

  // Honoã‚¢ãƒ—ãƒªã‚’ä½œæˆ
  const app = new OpenAPIHono();

  // APIèªè¨¼ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
  app.use(
    '/api/v1/*',
    basicAuth({
      username: process.env.BASIC_AUTH_USERNAME ?? 'admin',
      password: process.env.BASIC_AUTH_PASSWORD ?? 'admin',
    }),
  );

  // APIãƒ«ãƒ¼ãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆ
  app.route('/api', apiRoutes);

  // Viteé–¢é€£ã‚¢ã‚»ãƒƒãƒˆã‚’ãƒ—ãƒ­ã‚­ã‚·ï¼ˆçœç•¥ï¼‰
  // ...

  // React SSRã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  app.get('*', async (c) => {
    const url = c.req.url;

    try {
      // åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
      const initialData = {
        title: 'App Title',
        description: 'App Description',
        timestamp: new Date().toISOString(),
      };

      // Viteã§Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰
      const { App } = await vite.ssrLoadModule('/src/App.tsx');

      // Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’SSR
      const appHtml = renderToString(
        createElement(StrictMode, {}, createElement(App, { initialData })),
      );

      // index.html ã‚’èª­ã¿è¾¼ã¿ï¼ˆSingle Source of Truthï¼‰
      const rawTemplate = await readFile('index.html', 'utf-8');

      // Viteã®HTMLå¤‰æ›ã‚’é©ç”¨ï¼ˆHMRã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ³¨å…¥ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ã‚¹è§£æ±ºï¼‰
      const template = await vite.transformIndexHtml(url, rawTemplate);

      // SSRç”¨ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ç½®æ›
      const html = template
        .replace(/<!--ssr-title-->.*?<!--\/ssr-title-->/, initialData.title)
        .replace(/<!--ssr-description-->.*?<!--\/ssr-description-->/, initialData.description)
        .replace('<!--ssr-head-->', `<script>window.__INITIAL_DATA__ = ${JSON.stringify(initialData)};</script>`)
        .replace('<!--ssr-outlet-->', appHtml);

      return c.html(html);
    } catch (error) {
      if (error instanceof Error) {
        vite.ssrFixStacktrace(error);
        console.error('âŒ SSR Error:', error.message);
      }
      // ã‚¨ãƒ©ãƒ¼æ™‚ã¯index.htmlã‚’ãã®ã¾ã¾è¿”ã™ï¼ˆCSRãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
      const fallbackTemplate = await readFile('index.html', 'utf-8');
      const fallbackHtml = await vite.transformIndexHtml(url, fallbackTemplate);
      return c.html(fallbackHtml, 500);
    }
  });

  serve({ fetch: app.fetch, port });
};

startDevServer();
```

### Step 4: src/main.tsx ã‚’å®Ÿè£…ï¼ˆãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰

```typescript
import { StrictMode } from 'react';
import { createRoot, hydrateRoot } from 'react-dom/client';
import { App } from './App';
import './index.css';

/**
 * ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æ³¨å…¥ã•ã‚ŒãŸåˆæœŸãƒ‡ãƒ¼ã‚¿ã®å‹å®šç¾©
 */
interface InitialData {
  title: string;
  description: string;
  timestamp: string;
}

declare global {
  interface Window {
    __INITIAL_DATA__?: InitialData;
  }
}

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error('Root element not found');
}

// ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æ³¨å…¥ã•ã‚ŒãŸåˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
const initialData = window.__INITIAL_DATA__ || {
  title: 'Default Title',
  description: 'Default Description',
  timestamp: new Date().toISOString(),
};

const appElement = (
  <StrictMode>
    <App initialData={initialData} />
  </StrictMode>
);

/**
 * SSRã•ã‚ŒãŸHTMLãŒå®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ã‹åˆ¤å®š
 * @description hasChildNodes() ã¯ç©ºç™½ã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚‚å«ã‚€ãŸã‚ã€
 * å®Ÿéš›ã®Elementå­è¦ç´ ã®å­˜åœ¨ã‚’ç¢ºèªã™ã‚‹
 */
const hasSSRContent = (): boolean => {
  // Elementè¦ç´ ï¼ˆç©ºç™½ã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚’é™¤ãï¼‰ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  const hasElementChildren = rootElement.children.length > 0;
  // ã¾ãŸã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆæœŸãƒ‡ãƒ¼ã‚¿ãŒæ³¨å…¥ã•ã‚Œã¦ã„ã‚‹ã‹
  const hasInitialData = typeof window.__INITIAL_DATA__ !== 'undefined';
  return hasElementChildren || hasInitialData;
};

// SSRã•ã‚ŒãŸHTMLãŒã‚ã‚‹å ´åˆã¯ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
// ãã†ã§ãªã„å ´åˆã¯é€šå¸¸ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆCSRï¼‰
if (hasSSRContent()) {
  console.log('ğŸ”„ Hydrating React app...');
  hydrateRoot(rootElement, appElement, {
    onRecoverableError: (error) => {
      console.error('âš ï¸ Hydration recoverable error:', error);
    },
  });
} else {
  console.log('âš¡ Rendering React app (CSR)...');
  createRoot(rootElement).render(appElement);
}
```

### Step 5: src/App.tsx ã§åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹

```typescript
import type { FC } from 'react';

interface AppProps {
  initialData?: {
    title: string;
    description: string;
    timestamp: string;
  };
}

export const App: FC<AppProps> = ({ initialData }) => {
  return (
    <div>
      <h1>{initialData?.title || 'My App'}</h1>
      <p>Rendered at: {initialData?.timestamp}</p>
      {/* ã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
    </div>
  );
};
```

### Step 6: server/app.ts ã‚’ç°¡ç´ åŒ–ï¼ˆAPIãƒ«ãƒ¼ãƒˆã®ã¿ï¼‰

```typescript
import { OpenAPIHono } from '@hono/zod-openapi';
import { healthRoutes } from './routes/health.js';

const app = new OpenAPIHono();

// ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¨­å®š
// ...

// APIãƒ«ãƒ¼ãƒˆã®ã¿ç™»éŒ²
app.route('/api', healthRoutes);

// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
// ...

// APIãƒ«ãƒ¼ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export const apiRoutes = healthRoutes;
export { app };
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: `@vitejs/plugin-react can't detect preamble`

**åŸå› **: Viteã®Reactãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒFast Refreshç”¨ã®preambleã‚’æ¤œå‡ºã§ããªã„

**è§£æ±ºç­–**:
1. `vite.config.ts`ã§`include`ã¨`exclude`ã‚’è¨­å®š
2. HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«preambleã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ ï¼š
```html
<script type="module">
  import RefreshRuntime from 'http://localhost:5175/@react-refresh'
  RefreshRuntime.injectIntoGlobalHook(window)
  window.$RefreshReg$ = () => {}
  window.$RefreshSig$ = () => (type) => type
  window.__vite_plugin_react_preamble_installed__ = true
</script>
```

### ã‚¨ãƒ©ãƒ¼: `require is not defined`

**åŸå› **: `react-dom/server`ã‚’Viteã®`ssrLoadModule`ã§èª­ã¿è¾¼ã‚‚ã†ã¨ã—ã¦ã„ã‚‹

**è§£æ±ºç­–**:
1. `vite.config.ts`ã§`ssr.external`ã‚’è¨­å®šï¼š
```typescript
ssr: {
  external: ['react', 'react-dom'],
}
```
2. `dev.ts`ã§`react`ã¨`react-dom`ã‚’ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

### ã‚¨ãƒ©ãƒ¼: `React is not defined` (SSRæ™‚)

**åŸå› **: JSXãƒ•ã‚¡ã‚¤ãƒ«ã§ReactãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å‚ç…§ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºç­–**: `vite.config.ts` ã§ `jsxRuntime: 'automatic'` ã‚’è¨­å®šï¼ˆReact 17+ï¼‰

### ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸ä¸€è‡´

**åŸå› **: ã‚µãƒ¼ãƒãƒ¼ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœãŒç•°ãªã‚‹

**è§£æ±ºç­–**:
1. ä¸¡æ–¹ã§åŒã˜`StrictMode`è¨­å®šã‚’ä½¿ç”¨
2. åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’`window.__INITIAL_DATA__`çµŒç”±ã§ä¸€è‡´ã•ã›ã‚‹
3. æ—¥ä»˜ãªã©å‹•çš„ãªå€¤ã¯ã‚µãƒ¼ãƒãƒ¼ã§ç”Ÿæˆã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«æ¸¡ã™

---

## ğŸ“Š ãƒãƒ¼ãƒˆç•ªå·ã®å‰²ã‚Šå½“ã¦

| ã‚¢ãƒ—ãƒª | SSRã‚µãƒ¼ãƒãƒ¼ | Vite Dev |
|-------|-----------|----------|
| web | 3000 | 5173 |
| admin | 3001 | 5174 |
| playground | 3002 | 5175 |
| æ–°ã‚¢ãƒ—ãƒª | 3003ã€œ | 5176ã€œ |

---

## ğŸ­ æœ¬ç•ªç’°å¢ƒSSRå®Ÿè£…

æœ¬ç•ªç’°å¢ƒï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰ã§ã‚‚SSRã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®è¿½åŠ è¨­å®šã€‚

### Step 7: src/entry-server.tsx ã‚’ä½œæˆ

```typescript
import { createElement, StrictMode } from 'react';
import { renderToString } from 'react-dom/server';
import { App } from './App';

interface InitialData {
  title: string;
  description: string;
  timestamp: string;
}

/**
 * ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°
 */
export const render = (initialData: InitialData): string => {
  return renderToString(
    createElement(StrictMode, {}, createElement(App, { initialData })),
  );
};

/**
 * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
 */
export const getInitialData = (): InitialData => ({
  title: 'App Title',
  description: 'App Description',
  timestamp: new Date().toISOString(),
});
```

### Step 8: package.json ã®ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°

```json
{
  "scripts": {
    "build": "tsc -b && vite build && vite build --ssr src/entry-server.tsx --outDir dist/server"
  }
}
```

### Step 9: server/production.ts ã‚’ SSRå¯¾å¿œã«æ›´æ–°

```typescript
import { readFile } from 'node:fs/promises';
import { join } from 'node:path';
import { serve } from '@hono/node-server';
import { serveStatic } from '@hono/node-server/serve-static';
import { OpenAPIHono } from '@hono/zod-openapi';
import { basicAuth } from 'hono/basic-auth';
import { app } from './app.js';

interface SSRModule {
  render: (initialData: { title: string; description: string; timestamp: string }) => string;
  getInitialData: () => { title: string; description: string; timestamp: string };
}

const startProductionServer = async () => {
  const port = Number(process.env.API_PORT) || 3000;
  const distPath = join(process.cwd(), 'dist');

  // SSRãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿
  const ssrModule: SSRModule = await import(join(distPath, 'server', 'entry-server.js'));

  // index.htmlãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿
  const template = await readFile(join(distPath, 'index.html'), 'utf-8');

  const prodApp = new OpenAPIHono();

  // èªè¨¼è¨­å®š...
  // APIãƒ«ãƒ¼ãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆ...
  // é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡...

  // SSRãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  prodApp.get('*', async (c) => {
    const initialData = ssrModule.getInitialData();
    const appHtml = ssrModule.render(initialData);

    const html = template
      .replace(/<!--ssr-title-->.*?<!--\/ssr-title-->/, initialData.title)
      .replace(/<!--ssr-description-->.*?<!--\/ssr-description-->/, initialData.description)
      .replace('<!--ssr-head-->', `<script>window.__INITIAL_DATA__ = ${JSON.stringify(initialData)};</script>`)
      .replace('<!--ssr-outlet-->', appHtml);

    return c.html(html);
  });

  serve({ fetch: prodApp.fetch, port });
};

startProductionServer();
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### é–‹ç™ºç’°å¢ƒSSRå®Ÿè£…

- [ ] `vite.config.ts`ã«`ssr.external`è¨­å®šã‚’è¿½åŠ 
- [ ] `vite.config.ts`ã§`jsxRuntime: 'automatic'`ã‚’è¨­å®š
- [ ] `index.html`ã«SSRãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¿½åŠ ï¼ˆSingle Source of Truthï¼‰
- [ ] `server/dev.ts`ã§index.htmlã‚’èª­ã¿è¾¼ã¿SSRã‚’å®Ÿè£…
- [ ] `src/main.tsx`ã§ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- [ ] `src/App.tsx`ã§`initialData`ãƒ—ãƒ­ãƒƒãƒ—ã‚¹ã‚’å—ã‘å–ã‚‹
- [ ] `window.__INITIAL_DATA__`ã§åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’æ³¨å…¥
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã§CSRãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè£…

### æœ¬ç•ªç’°å¢ƒSSRå®Ÿè£…ï¼ˆã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆï¼‰

- [ ] `src/entry-server.tsx`ã§SSRãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°ã‚’å®Ÿè£…
- [ ] `package.json`ã®ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«SSRãƒ“ãƒ«ãƒ‰ã‚’è¿½åŠ 
- [ ] `server/production.ts`ã§SSRãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿
- [ ] ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚»ãƒƒãƒˆãƒ‘ã‚¹ã‚’è§£æ±º

### Vercelãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œ

- [ ] `packages/shared` ãŒãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆ`dist/index.js` ãŒå­˜åœ¨ï¼‰
- [ ] `api/[[...route]].ts`ã§Node.js Serverless Functionsã‚¹ã‚¿ã‚¤ãƒ«ã§å®Ÿè£…
- [ ] `server/appVercel.ts`ã§è»½é‡ç‰ˆHonoã‚¢ãƒ—ãƒªã‚’å®Ÿè£…ï¼ˆ`@myorg/shared` OKï¼‰
- [ ] `middleware.ts`ã§Edge Middlewareèªè¨¼ã‚’å®Ÿè£…ï¼ˆ`full-app` or `api-only`ï¼‰
- [ ] `vercel.json`ã§ãƒ“ãƒ«ãƒ‰è¨­å®šã‚’å®šç¾©
- [ ] Vercelç’°å¢ƒå¤‰æ•°ã«`BASIC_AUTH_USERNAME`/`BASIC_AUTH_PASSWORD`ã‚’è¨­å®š
- [ ] CSRãƒ“ãƒ«ãƒ‰ãŒæ­£å¸¸ã«é€šã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆ`pnpm build`ï¼‰
- [ ] Deployment Protectionï¼ˆSSOï¼‰ã‚’ç„¡åŠ¹åŒ–ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

---

## ğŸš€ èµ·å‹•ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆSSR + HMRï¼‰
pnpm --filter @myorg/{app-name} dev:api

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ + SSRãƒãƒ³ãƒ‰ãƒ«ï¼‰
pnpm --filter @myorg/{app-name} build

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆSSRå¯¾å¿œï¼‰
pnpm --filter @myorg/{app-name} start

# Vercelãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
vercel dev --cwd apps/{app-name}

# Vercelãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆGité€£æºæ¨å¥¨ï¼‰
git push origin main  # è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

---

## ğŸŒ Vercelãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã®é–¢ä¿‚

### ãªãœVercelã§SSRã‚’ä½¿ã‚ãªã„ã®ã‹

1. **Vercel Edge Runtimeã®åˆ¶ç´„**: `react-dom/server` ãªã©Node.jsä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‹•ã‹ãªã„
2. **ã‚³ã‚¹ãƒˆåŠ¹ç‡**: é™çš„HTML + Serverless ã®æ–¹ãŒã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«
3. **ã‚·ãƒ³ãƒ—ãƒ«ã•**: Honoå…¬å¼æ¨å¥¨ã®ã‚¼ãƒ­ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ‡ãƒ—ãƒ­ã‚¤

### Vercelç”¨ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
apps/{app-name}/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ [[...route]].ts  # â†’ Serverless Functions
â”œâ”€â”€ middleware.ts         # â†’ Edge Middlewareï¼ˆèªè¨¼ç­‰ï¼‰
â”œâ”€â”€ server/
â”‚   â””â”€â”€ appVercel.ts      # Vercelç”¨Honoã‚¢ãƒ—ãƒªï¼ˆè»½é‡ç‰ˆï¼‰
â””â”€â”€ dist/                 # â†’ é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSRï¼‰
```

### api/[[...route]].ts ã®å®Ÿè£…

> âš ï¸ **Node.js Serverless Functions ã‚¹ã‚¿ã‚¤ãƒ«**ã§å®Ÿè£…ã€‚`@myorg/shared` ãªã©ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã«å¿…è¦ã€‚

```typescript
/**
 * Vercel Functions ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
 * @description Node.js Serverless Functions (req,res) ã‚’ Hono (fetch) ã«ãƒ–ãƒªãƒƒã‚¸ã™ã‚‹
 */
import type { IncomingMessage, ServerResponse } from 'node:http';
import app from '../server/appVercel.js';

type NodeReq = IncomingMessage;
type NodeRes = ServerResponse<IncomingMessage>;

const toUrl = (req: NodeReq) => {
  const proto = req.headers['x-forwarded-proto'] ?? 'https';
  const host = req.headers['x-forwarded-host'] ?? req.headers.host ?? 'localhost';
  return new URL(req.url ?? '/', `${proto}://${host}`);
};

// ... ãƒ˜ãƒƒãƒ€ãƒ¼å¤‰æ›ã€ãƒœãƒ‡ã‚£èª­ã¿è¾¼ã¿ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° ...

export default async (req: NodeReq, res: NodeRes) => {
  const request = new Request(toUrl(req), {
    method: req.method,
    headers: toHeaders(req),
    body: await readBody(req),
  });

  const response = await app.fetch(request);
  res.statusCode = response.status;
  response.headers.forEach((v, k) => res.setHeader(k, v));
  res.end(Buffer.from(await response.arrayBuffer()));
};
```

> ğŸ“ **å‚è€ƒ**: [Hono - Vercel](https://hono.dev/docs/getting-started/vercel)
> 
> ğŸ’¡ ã‚·ãƒ³ãƒ—ãƒ«ãª `export default app` ã ã¨Edge Functionsæ‰±ã„ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### server/appVercel.ts ã®å½¹å‰²

Vercel Node.js Serverless Functionsç”¨ã®è»½é‡Honoã‚¢ãƒ—ãƒªï¼š

```typescript
import { Hono } from 'hono';
import * as shared from '@myorg/shared';  // âœ… ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãªã‚‰ä½¿ç”¨å¯èƒ½

const app = new Hono();

// ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
app.get('/health', (c) => c.json({ status: 'ok' }));
app.get('/api/health', (c) => c.json({ status: 'ok' }));

// ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆpackages/shared ã®ãƒ“ãƒ«ãƒ‰ç¢ºèªï¼‰
app.get('/api/debug/static', (c) => {
  const keys = Object.keys(shared as Record<string, unknown>);
  return c.json({ ok: true, keys });
});

export default app;
```

**âš ï¸ é‡è¦ãªæ³¨æ„ç‚¹**:
- `@myorg/shared` ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ **ãƒ“ãƒ«ãƒ‰æ¸ˆã¿JavaScriptãŒå¿…è¦**ï¼ˆ`packages/shared/dist/index.js`ï¼‰
- `packages/shared/package.json` ã® `exports` ãŒ `./dist/index.js` ã‚’æŒ‡ã—ã¦ã„ã‚‹ã“ã¨
- `@hono/zod-openapi`ã€`@scalar/hono-api-reference` ã¯é‡ã„ãŸã‚ä½¿ç”¨ã—ãªã„

### middleware.ts ã®å½¹å‰²

Vercel Edge Middlewareã§èªè¨¼ãªã©ã‚’å®Ÿè£…ï¼š

```typescript
import type { NextRequest } from 'next/server';
import { NextResponse } from 'next/server';

export const config = {
  matcher: ['/((?!_next/static|_next/image|favicon.ico|health).*)'],
};

export const middleware = (request: NextRequest) => {
  // Basicèªè¨¼ãªã©
  // ...
  return NextResponse.next();
};
```

### é–‹ç™ºç’°å¢ƒã¨Vercelç’°å¢ƒã®é•ã„

| é …ç›® | é–‹ç™ºç’°å¢ƒ | Vercel |
|------|---------|--------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | SSRï¼ˆ`server/dev.ts`ï¼‰ | CSRï¼ˆ`dist/`é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ |
| API | Hono + Node.js | Hono + Serverless Functions |
| èªè¨¼ | HonoãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ | Edge Middleware |
| HMR/Fast Refresh | âœ… | N/Aï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰ |

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Vite SSR Guide](https://vite.dev/guide/ssr.html)
- [React 19 Server APIs](https://react.dev/reference/react-dom/server)
- [Hono Documentation](https://hono.dev/)
- [Hono - Vercel Deployment](https://hono.dev/docs/getting-started/vercel)
