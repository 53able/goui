---
description: AI SDK 6 Beta ã®ç’°å¢ƒå¤‰æ•°è¨­å®šã‚¬ã‚¤ãƒ‰ï¼ˆOpenAI, Anthropic, Google AI, Azure OpenAIï¼‰
globs: ["**/*.ts", "**/*.tsx"]
alwaysApply: false
---

# AI API ç’°å¢ƒå¤‰æ•°è¨­å®šã‚¬ã‚¤ãƒ‰

> @goui/ai ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä½¿ç”¨ã™ã‚‹ AI ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç’°å¢ƒå¤‰æ•°è¨­å®š

---

## å¿…è¦ãªç’°å¢ƒå¤‰æ•°

### OpenAI (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)

```bash
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

> ğŸ”— APIã‚­ãƒ¼å–å¾—: https://platform.openai.com/api-keys

---

## è¨­å®šæ–¹æ³•

### 1. ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```bash
# goui/ (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ)
touch .env
echo "OPENAI_API_KEY=sk-your-key-here" >> .env
```

#### .env ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹

```bash
# AI API Keys
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Basicèªè¨¼ (é–‹ç™ºç”¨)
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=admin
```

> âš ï¸ `.env` ã¯ `.gitignore` ã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¾ã›ã‚“

---

### 2. Vercel ç’°å¢ƒå¤‰æ•°ã®ç™»éŒ²

#### æ–¹æ³•1: CLI ã§å¯¾è©±å¼ã«è¨­å®š

```bash
# apps/web ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd apps/web
vercel link  # åˆå›ã®ã¿

# ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ 
vercel env add OPENAI_API_KEY production
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å€¤ã‚’å…¥åŠ›

# è¤‡æ•°ç’°å¢ƒã«è¿½åŠ ã™ã‚‹å ´åˆ
vercel env add OPENAI_API_KEY production preview development
```

#### æ–¹æ³•2: .env ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä¸€æ‹¬è¨­å®š

```bash
# .env.production ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > .env.production << 'EOF'
OPENAI_API_KEY=sk-your-production-key
BASIC_AUTH_USERNAME=your_username
BASIC_AUTH_PASSWORD=your_secure_password
EOF

# Vercelã¸ä¸€æ‹¬ç™»éŒ²
while IFS='=' read -r key value; do
  [[ -z "$key" || "$key" =~ ^# ]] && continue
  echo "$value" | vercel env add "$key" production --yes 2>/dev/null || \
    echo "âš ï¸ $key already exists, skipping"
done < .env.production

# å®Œäº†å¾Œã¯ .env.production ã‚’å‰Šé™¤
rm .env.production
```

#### æ–¹æ³•3: Vercel Dashboard ã‹ã‚‰è¨­å®š

1. https://vercel.com ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. **Settings** â†’ **Environment Variables**
4. **Add New** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ä»¥ä¸‹ã‚’å…¥åŠ›:
   - **Key**: `OPENAI_API_KEY`
   - **Value**: `sk-xxxxxxxx...`
   - **Environment**: Production / Preview / Development ã‚’é¸æŠ

#### Vercel â†’ ãƒ­ãƒ¼ã‚«ãƒ«ã¸å–å¾—

```bash
# Vercelã«è¨­å®šæ¸ˆã¿ã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«å–å¾—
cd apps/web
vercel env pull .env.local
```

---

## ä»–ã®AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

### Anthropic (Claude)

```bash
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxx
```

> ğŸ”— https://console.anthropic.com/settings/keys

### Google AI (Gemini)

```bash
GOOGLE_GENERATIVE_AI_API_KEY=xxxxxxxxxxxxx
```

> ğŸ”— https://aistudio.google.com/app/apikey

### Azure OpenAI

```bash
AZURE_OPENAI_API_KEY=xxxxxxxxxxxxx
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
```

---

## ä½¿ç”¨ä¾‹

### ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ (apps/*/server/)

```typescript
import { openai, generateText } from '@goui/ai';

// OPENAI_API_KEY ã¯è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹
const result = await generateText({
  model: openai('gpt-4o'),
  prompt: 'Hello!',
});
```

### åˆ¥ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ã†å ´åˆ

```bash
# 1. ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ 
pnpm --filter @goui/ai add @ai-sdk/anthropic@beta

# 2. packages/ai/src/index.ts ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export { anthropic, createAnthropic } from '@ai-sdk/anthropic';
```

```typescript
import { anthropic, generateText } from '@goui/ai';

const result = await generateText({
  model: anthropic('claude-sonnet-4-20250514'),
  prompt: 'Hello!',
});
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### "Invalid API Key" ã‚¨ãƒ©ãƒ¼

1. APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª:
   ```bash
   echo $OPENAI_API_KEY
   ```

2. .env ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ã‹ç¢ºèª:
   ```bash
   ls -la .env
   ```

3. ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•

### Vercel ã§ç’°å¢ƒå¤‰æ•°ãŒåæ˜ ã•ã‚Œãªã„

1. ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ã„ Environment (Production/Preview/Development) ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. å†ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹:
   ```bash
   vercel deploy --prod
   ```
